import{u as Q,T as m,L as H,a as J,s as W,b as X,A as Y}from"./LazyDataTable80856.js";import{d as k,r as _,j as N,b as B,o as y,c as V,a as r,f as t,u as a,C as Z,w as l,x as ee,v as x,k as h,l as te,t as w,q as oe,T as ae}from"../index80856.js";import{u as E}from"./contest80856.js";import{a as le}from"./index808566.js";import{s as se}from"./index808564.js";import{a as T,b as $}from"./date80856.js";import{u as ne}from"./settings80856.js";import"./index808562.js";const re={class:"flex items-center justify-between"},ie={key:0,class:"flex flex-col mb-8"},ue={class:"flex items-center gap-2"},de={class:"flex items-center justify-center"},U=10,ce=k({__name:"ContestTable",props:{video_id:{},user_id:{}},setup(g){const c=g,i=_(),b=_([{label:"Pubblicato",value:!0},{label:"Non pubblicato",value:!1}]),f=E(),v=ne(),{contests:C,totalContests:L}=N(f),{onSort:P,onPage:z,onFilter:j,loadLazyData:F,isLoading:K}=Q({rows:U},A),u=_({id:{value:"",matchMode:m.EQ},online:{value:"",matchMode:m.EQ},created_at:{value:null,matchMode:m.GTE},end_at:{value:null,matchMode:m.GTE},title:{value:"",matchMode:m.LIKE}});function O(){j(u.value)}async function A(s){try{i.value&&s.set("category_eq",i.value),u.value.created_at.value&&(s=$(s,"created_at",u.value.created_at.value)),u.value.end_at.value&&(s=$(s,"end_at",u.value.end_at.value)),await f.fetchContests(s)}catch(o){console.error(o)}}const G=function(s){return{name:x.contestDettaglio,params:{id:s.id}}};return B(()=>{i.value="singing",F()}),(s,o)=>{const S=J,D=ee,I=se,p=W,M=le,R=X,q=ae;return y(),V("div",null,[r("div",re,[!c.user_id&&!c.video_id?(y(),V("div",ie,[o[4]||(o[4]=r("label",{for:"contests_type",class:"text-muted-color font-500 mb-1"},"Categoria",-1)),t(S,{class:"w-full",modelValue:i.value,"onUpdate:modelValue":[o[0]||(o[0]=e=>i.value=e),o[1]||(o[1]=e=>a(F)())],options:a(v).getUserCategories(),"option-label":"labels.it","option-value":"value"},null,8,["modelValue","options"])])):Z("",!0),r("div",null,[t(D,{class:"w-full",label:"Crea contest",type:"submit",icon:"pi pi-plus",onClick:o[2]||(o[2]=e=>s.$router.push({name:a(x).newContest}))})])]),t(H,{value:a(C),rows:U,"total-records":a(L),onSort:a(P),onPage:a(z),onFilter:O,filters:u.value,"onUpdate:filters":o[3]||(o[3]=e=>u.value=e),"data-key":"id",scrollable:"",loading:a(K),rowHover:!0,showGridlines:""},{empty:l(()=>o[5]||(o[5]=[h("Non ci sono contest")])),default:l(()=>[t(p,{class:"min-w-[200px]",header:"Titolo",field:"title",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!0},{filter:l(({filterModel:e,filterCallback:d})=>[t(I,{fluid:"",modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,type:"text",placeholder:"Filtra",onKeydown:te(n=>d(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),body:l(({data:e})=>[r("div",ue,[r("span",null,w(e.title),1)])]),_:1}),t(p,{class:"min-w-[200px]",header:"Data apertura",field:"created_at",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!0},{filter:l(({filterModel:e,filterCallback:d})=>[t(M,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,dateFormat:"dd/mm/yy",placeholder:"Filtra",onDateSelect:n=>d()},null,8,["modelValue","onUpdate:modelValue","onDateSelect"])]),body:l(({data:e})=>[h(w(a(T)(e.created_at)),1)]),_:1}),t(p,{class:"min-w-[200px]",header:"Data chiusura",field:"end_at",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!0},{filter:l(({filterModel:e,filterCallback:d})=>[t(M,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,dateFormat:"dd/mm/yy",placeholder:"Filtra",onDateSelect:n=>d()},null,8,["modelValue","onUpdate:modelValue","onDateSelect"])]),body:l(({data:e})=>[h(w(a(T)(e.end_at)),1)]),_:1}),t(p,{class:"min-w-[100px]",header:"Stato",field:"online",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!0},{filter:l(({filterModel:e,filterCallback:d})=>[t(S,{class:"w-[100px]",modelValue:e.value,"onUpdate:modelValue":[n=>e.value=n,d],options:b.value,"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),body:l(({data:e})=>[t(R,{value:a(v).getPrettyVideoStatus(e.online),severity:a(v).getColorVideoStatus(e.online)},null,8,["value","severity"])]),_:1}),t(p,{class:"w-[50px]","align-frozen":"right",frozen:"","V-if":"!props.user_id && !props.video_id"},{body:l(({data:e})=>[r("div",de,[oe(t(D,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-arrow-right",text:"",rounded:"",as:"router-link",to:G(e)},null,8,["to"]),[[q,"Dettaglio",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","total-records","onSort","onPage","filters","loading"])])}}}),pe={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 mt-2"},me={class:"font-semibold text-2xl mb-4"},xe=k({__name:"ContestsView",setup(g){const c=_([]),i=E(),{totalContests:b}=N(i),f=function(){c.value=[{label:"Tutti i Contest",route:{name:x.contest}}]};return B(()=>{f()}),(v,C)=>(y(),V("div",null,[t(Y,{items:c.value},null,8,["items"]),r("div",pe,[r("div",me,w(a(b))+" Contest ",1)]),t(ce)]))}});export{xe as default};
